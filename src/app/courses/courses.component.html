<ng-container *ngIf="(course$| async) as course; else loading">
  <mat-card class="card-1">
    <mat-card-header>
      <mat-card-title>
        <span class="title">{{ course.subject_code }}</span>
        <span>{{ course.subject_name }}</span></mat-card-title>
        <span fxFlex></span>
        <mat-chip-list>
          <mat-chip>{{course.faculty}}</mat-chip>
        </mat-chip-list>

      <mat-card-subtitle>
        <span class="title">Level {{course.year_level}}</span>
        <br> 
        <span *ngIf="course.course_endorsable == 'Yes'; else: courseno">Course Endorsable</span>
        <ng-template #courseno>
        <span >No Endorsement</span>
       </ng-template>
        <br>
        <a href = "mailto: abc@example.com">{{course.teacher_in_charge}}</a>            
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      {{ course.course_information}}
    </mat-card-content>
    <!-- <mat-card-actions>
        <button mat-icon-button (click)="remove(course.id)">
            <mat-icon>delete</mat-icon>
        </button>
      <span fxFlex></span>
      <a routerLink="{{course.id}}"><button mat-icon-button aria-label="Example icon-button with a heart icon">
          <mat-icon>arrow_forward</mat-icon>
        </button></a>
    </mat-card-actions> -->
  </mat-card>
</ng-container>

<mat-divider></mat-divider>

<button mat-raised-button color="primary" 
  *ngIf="showform == false; else formshow" 
  (click)="show()">Create Standard for Course</button>

<ng-template #formshow>

  <form novalidate [formGroup]="form">
    <div class fxLayout="column">
      <mat-form-field class="example-full-width">
        <input matInput placeholder="Title" formControlName="title">
      </mat-form-field>

      <mat-form-field class="example-full-width">
          <input matInput placeholder="Standard No" formControlName="standardno">
      </mat-form-field>

      <mat-form-field>
          <mat-select formControlName="version" placeholder="Version">
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
            <mat-option value="4">4</mat-option>
            <mat-option value="5">5</mat-option>
            <mat-option value="6">6</mat-option>
            <mat-option value="7">7</mat-option>
            <mat-option value="8">8</mat-option>
            <mat-option value="9">9</mat-option>
            <mat-option value="10">10</mat-option>
            <mat-option value="11">11</mat-option>
            <mat-option value="12">12</mat-option>
            <mat-option value="13">13</mat-option>
            <mat-option value="14">14</mat-option>
          </mat-select>
      </mat-form-field>

      <mat-form-field>
          <mat-select formControlName="standardtype" placeholder="Standard Type">
            <mat-option value="AS">Achievement</mat-option>
            <mat-option value="US">Unit</mat-option>
          </mat-select>
      </mat-form-field>

      <mat-form-field>
          <mat-select formControlName="assessmenttype" placeholder="Assessment Type">
            <mat-option value="Internal">Internal</mat-option>
            <mat-option value="External">External</mat-option>
          </mat-select>
      </mat-form-field>

      <mat-form-field>
          <mat-select formControlName="further_assessment" placeholder="Further Reassessement">
            <mat-option value="Yes">Further Reassessement offered</mat-option>
            <mat-option value="No">Further Reassessement NOT offered</mat-option>
          </mat-select>
      </mat-form-field>

      <mat-form-field>
          <mat-select formControlName="credits" placeholder="Credits">
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
            <mat-option value="4">4</mat-option>
            <mat-option value="5">5</mat-option>
            <mat-option value="6">6</mat-option>
            <mat-option value="7">7</mat-option>
            <mat-option value="8">8</mat-option>
            <mat-option value="9">9</mat-option>
            <mat-option value="10">10</mat-option>
            <mat-option value="11">11</mat-option>
            <mat-option value="12">12</mat-option>
            <mat-option value="13">13</mat-option>
            <mat-option value="14">14</mat-option>
          </mat-select>
      </mat-form-field>
    
      <mat-form-field>
          <mat-select formControlName="literacy_numeracy" placeholder="Literacy / Numeracy">
            <mat-option value="NA">Not Applicable</mat-option>
            <mat-option value="L1 Literacy">L1 Literacy</mat-option>
            <mat-option value="L1 Numeracy">L1 Numeracy</mat-option>
            <mat-option value="L1 Literacy and Numeracy">L1 Literacy and Numeracy</mat-option>
            <mat-option value="Reading Literacy">Reading Literacy</mat-option>
            <mat-option value="Writing Literacy">Writing Literacy</mat-option>
            <mat-option value="Writing Literacy and Reading Literacy">Writing Literacy and Reading Literacy</mat-option>
          </mat-select>
      </mat-form-field>
    
      <mat-form-field>
          <mat-select formControlName="level" placeholder="Assessment level">
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
          </mat-select>
      </mat-form-field> 

      <mat-form-field>
          <mat-select formControlName="assessment_method" placeholder="Mode of Assessment">
            <mat-option value="Exam">Exam</mat-option>
            <mat-option value="Written Report">Written Report</mat-option>
            <mat-option value="Oral Presentation">Oral Presentation</mat-option>
            <mat-option value="Visual Presentation">Visual Presentation</mat-option>
            <mat-option value="Portfolio">Portfolio</mat-option>
            <mat-option value="Performance">Performance</mat-option>
            <mat-option value="Project">Project</mat-option>
            <mat-option value="Other">Other</mat-option>
          </mat-select>
      </mat-form-field>
   

    <mat-form-field>
        <mat-select formControlName="completion" placeholder="Expected Completion">
          <mat-option value="Term 1">Term 1</mat-option>
          <mat-option value="Term 2">Term 2</mat-option>
          <mat-option value="Term 3">Term 3</mat-option>
          <mat-option value="Term 4">Term 4</mat-option>
        </mat-select>
    </mat-form-field>
  </div>
    

    <button mat-button (click)="save()" color="primary">Save</button>

    
    
  </form>
</ng-template>

<ng-template #loading><mat-spinner></mat-spinner></ng-template>

<div class="example-container">
    <mat-accordion>
        <mat-expansion-panel class="card-1" *ngFor="let standard of standards$ | async">
          <mat-expansion-panel-header
          collapsedHeight="80px"
          >
            <mat-panel-title >
                <span>{{standard.standardtype}}{{standard.standardno}} vr{{standard.version}}</span>
                <span fxFlex></span>
                
            </mat-panel-title>
            <mat-panel-description>
                <span style="max-height: 53px; text-overflow: ellipsis">{{ standard.title }}</span>
                <span fxFlex></span>
                <!-- <span>{{standard.assessmenttype}}</span>
                <span class="title">{{standard.credits}} Credits</span>                 -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div fxLayout="column">
            <div fxLayout="row">
              <div fxFlex="20">
                  {{standard.assessmenttype}} Level: {{standard.level}}
              </div>
              <div fxFlex></div>
              <div fxFlex="50">
                  <div>{{standard.literacy_numeracy}}</div>
                  <div fxFlex></div>
                  <div>Cr: {{standard.credits}}</div>
              </div>
            </div>

            <mat-divider></mat-divider>

            <div fxLayout="row">
              <div fxFlex="20">
                  {{standard.assessment_method}}
              </div>
              <div fxFlex></div>
              <div fxFlex="50">
                  <div>{{standard.further_assessment}} further Assessment</div>
                  <div fxFlex></div>
                  <div>Due: {{standard.completion}}</div>                   
              </div>
            </div>
          </div>

            <mat-divider></mat-divider>

            <app-resources class="resource" [standardid]="standard.id"></app-resources>

       
        
        <mat-action-row>
            <button mat-icon-button (click)="addstandard(standard.id)">
                <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button (click)="remove(standard.id)">
                <mat-icon>delete</mat-icon>
            </button>
        </mat-action-row>






        </mat-expansion-panel>
        
    </mat-accordion>
</div>
  

